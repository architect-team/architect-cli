name: nestjs-simple-client
description: Client used to test the connection to the simple NestJS microservice
keywords:
  - nestjs
  - examples
  - microservice
  - client

dependencies:
  nestjs-simple: latest

services:
  client:
    build:
      context: ./
    interfaces:
      main: 3000
    environment:
      HELLO_SERVICE_HOST: ${{ dependencies['nestjs-simple'].interfaces.main.host }}
      HELLO_SERVICE_PORT: ${{ dependencies['nestjs-simple'].interfaces.main.port }}
    ${{ if architect.environment == 'local' }}:
      command: npm run start:dev
      volumes:
        src:
          host_path: ./src/
          mount_path: /usr/src/app/src/

interfaces:
  main:
    description: Exposes the app
    url: ${{ services.client.interfaces.main.url }}
    ingress:
      subdomain: app
